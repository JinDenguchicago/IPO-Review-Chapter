"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
ipo <- as.data.table(ipo)
### reading first SDC request
#setwd("C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
ipo <- as.data.table(ipo)
### reading first SDC request
#setwd("C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
#ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
#ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
#ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
#ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- fread(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
#ipo <- as.data.table(ipo)
### loading packages:
require(data.table)
require(bit64)
require(lubridate)
require(stringr)
### reading first SDC request
ipo <- read.csv(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
ipo <- as.data.table(ipo)
library(knitr)
knitr::opts_knit$set(root.dir = "/Users/orhahog/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
### file with SDC request
ipo.datafile <- "IPO data all.csv"
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
#setwd("C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
### file with SDC request
ipo.datafile <- "IPO data all.csv"
### loading packages:
#require(bit64)
#require(lubridate)
#require(stringr)
### reading first SDC request
ipo <- read.csv(ipo.datafile)
### changing names of the variables
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
require(data.table)
ipo <- as.data.table(ipo)
### keep only IPOs
### 40,695 obs -> 14,589
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
### format dates
reqiure(lubridate)
### keep only IPOs
### 40,695 obs -> 14,589
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
### format dates
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
!is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
ipo$CEF == "No"
ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
ipo[, CUSIP8 := paste0(CUSIP, 10)]
ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
ipo <- read.csv(ipo.datafile)
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
require(data.table)
ipo <- as.data.table(ipo)
kable(head(ipo[,13:26, with = F]))
### keep only IPOs
### 40,695 obs -> 14,589
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
summary(ipo)
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
### file with SDC request
ipo.datafile <- "IPO data all.csv"
ipo <- read.csv(ipo.datafile)
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
require(data.table)
ipo <- as.data.table(ipo)
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
!is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
ipo$CEF == "No"
ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
require(stringr)
ipo[, CUSIP8 := paste0(CUSIP, 10)]
ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
table(ipo$REIT)
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
ipo <- read.csv("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
require(data.table)
ipo <- as.data.table(ipo)
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
!is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
ipo$CEF == "No"
ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
require(stringr)
ipo[, CUSIP8 := paste0(CUSIP, 10)]
ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
require(lubridate)
require(lubridate)
require(lubridate)
require(lubridate)
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "Depositary",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
ipo <- as.data.table(ipo)
View(ipo)
table(ipo$Depositary)
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "ADR",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
ipo <- ipo[REIT != ""]
table(ipo$ADR)
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
#logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
#  !is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
#  ipo$CEF == "No"
#ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
#require(stringr)
#ipo[, CUSIP8 := paste0(CUSIP, 10)]
#ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "ADR",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
ipo <- ipo[REIT == ""]
table(ipo$ADR)
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
#logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
#  !is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
#  ipo$CEF == "No"
#ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
#require(stringr)
#ipo[, CUSIP8 := paste0(CUSIP, 10)]
#ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
ipo <- ipo[ADR == "No"]
table(ipo$Unit)
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "ADR",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
ipo <- ipo[REIT == ""]
table(ipo$ADR)
ipo <- ipo[ADR == "No"]
table(ipo$Unit)
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
"Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
#logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
#  !is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
#  ipo$CEF == "No"
#ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
#require(stringr)
#ipo[, CUSIP8 := paste0(CUSIP, 10)]
#ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
dim(ipo)[1]
table(ipo$Type)
types <- data.frame(table(ipo$Type))
print(types[order])
types <- data.frame(table(ipo$Type))
print(types[order(types$Freq, decreasing = T)])
types <- data.frame(table(ipo$Type))
print(types[order(types$Freq, decreasing = T),])
ipo <- ipo[ADR == "No"]
table(ipo$Unit)
ipo <- ipo[Unit != "Yes"]
types <- data.frame(table(ipo$Type))
print(types[order(types$Freq, decreasing = T),])
unlink('IPOData_cache', recursive = TRUE)
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "ADR",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
ipo <- ipo[REIT == ""]
table(ipo$ADR)
ipo <- ipo[ADR == "No"]
table(ipo$Unit)
ipo <- ipo[Unit != "Yes"]
types <- data.frame(table(ipo$Type))
print(types[order(types$Freq, decreasing = T),])
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
#ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
#             "Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
#ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
#logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
#  !is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
#  ipo$CEF == "No"
#ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
#require(stringr)
#ipo[, CUSIP8 := paste0(CUSIP, 10)]
#ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
library(knitr)
knitr::opts_knit$set(root.dir = "C:/Users/ev99/Dropbox/Projects/IPO review chapter/Data used in GitHub/")
require(data.table)
ipo <- fread("IPO data all.csv")
colnames(ipo) <- c("Filing_date", "Issue_date", "Issuer", "State", "Nation",
"IPO_Flag", "Original_IPO_Flag", "Offer_Price",
"Type", "Description", "REIT", "Unit", "ADR",
"Deal_number", "CEF",  "CUSIP", "CUSIP9",
"Proceeds", "VC", "Gross_spread",  "Mgr_codes",
"Tech_ind", "Low_Price", "High_Price",
"Low_Price_History", "High_Price_History")
kable(head(ipo[, 1:12, with = F]))
kable(head(ipo[,13:26, with = F]))
ipo <- ipo[IPO_Flag != "No" & Original_IPO_Flag != "No"]
table(ipo$REIT)
ipo <- ipo[REIT == ""]
table(ipo$ADR)
ipo <- ipo[ADR == "No"]
table(ipo$Unit)
ipo <- ipo[Unit != "Yes"]
types <- data.frame(table(ipo$Type))
ind <- order(types$Freq, decreasing = T)
print(types[ind[1:10],])
require(lubridate)
ipo[, `:=`(Filing_date = mdy(Filing_date), Issue_date = mdy(Issue_date))]
ipo[, Year := year(Issue_date)]
### delete commas from the Offer_Price and convert in to numeric format
ipo[, Offer_Price := gsub(",","", Offer_Price)]
ipo[, Offer_Price := as.numeric(as.character(Offer_Price))]
### types of securities we will keep in the data (common/ordinary shares)
### 14,589 obs before ---> 13,956 obs after
### Comment: sometimes Ritter codes "MLP-Common Shs" as units =1
#ex_types <- c("Units", "Ltd Prtnr Int", "MLP-Common Shs", "Shs Benficl Int",
#             "Ltd Liab Int", "Stock Unit", "Trust Units", "Beneficial Ints")
#ipo <- ipo[!Type %in% ex_types,]
### drop REIT, Units, ADR, penny stocks and CEF
### 13,956 obs before ---> 10,645 obs after
#logic <- ipo$REIT == "" & (ipo$Unit == "No" | ipo$Unit == "") &  ipo$Depositary == "No" &
#  !is.na(ipo$Offer_Price) & ipo$Offer_Price >= 5 &
#  ipo$CEF == "No"
#ipo <- ipo[logic,]
### creating 8-digit CUSIP to match with CRSP
#require(stringr)
#ipo[, CUSIP8 := paste0(CUSIP, 10)]
#ipo[str_length(CUSIP9) > 1, CUSIP8 := substr(CUSIP9, 1,8)]
